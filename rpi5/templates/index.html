<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arduino Control - Arduino 1 & 3</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Arduino Control Interface</h1>
            <p>Manage Arduino 1 (D1) and Arduino 3 (NodeMCU)</p>
        </header>

        <main>
            <!-- Arduino 1 (D1 ESP8266) Section -->
            <section class="card">
                <h2>Arduino 1 (D1 ESP8266) - 192.168.0.37</h2>
                <p><strong>Status:</strong> <span id="arduino1Status">Disconnected</span></p>
                <p><strong>Inner LED:</strong> <span id="arduino1LedStatus">OFF</span></p>
                <button onclick="toggleArduino1Led()">Toggle Inner LED</button>
                <p><strong>Temperature:</strong> <span id="arduino1Temperature">-</span> °C</p>
            </section>

            <!-- Arduino 3 (NodeMCU ESP8266) Section -->
            <section class="card">
                <h2>Arduino 3 (NodeMCU ESP8266) - 192.168.0.161</h2>
                <p><strong>Status:</strong> <span id="arduino3Status">Disconnected</span></p>
                <p><strong>Inner LED:</strong> <span id="arduino3LedStatus">OFF</span></p>
                <button onclick="toggleArduino3Led()">Toggle Inner LED</button>
                <p><strong>Relay D0:</strong> <span id="relayD0Status">OFF</span></p>
                <p><strong>Relay D1:</strong> <span id="relayD1Status">OFF</span></p>
            </section>

            <!-- LED Control -->
            <section class="card control-card">
                <h2>LED Control</h2>
                <div class="led-display">
                    <div id="ledIndicator" class="led-off"></div>
                    <p id="ledStatus">LED: OFF</p>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="ledOn()">Turn ON</button>
                    <button class="btn btn-danger" onclick="ledOff()">Turn OFF</button>
                    <button class="btn btn-secondary" onclick="ledToggle()">Toggle</button>
                </div>
            </section>

            <!-- Built-in LED Control -->
            <section class="card control-card">
                <h2>Built-in LED Control</h2>
                <div class="led-display">
                    <div id="builtinLedIndicator" class="led-off"></div>
                    <p id="builtinLedStatus">Built-in LED: OFF</p>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="builtinLedOn()">Turn ON</button>
                    <button class="btn btn-danger" onclick="builtinLedOff()">Turn OFF</button>
                    <button class="btn btn-secondary" onclick="builtinLedToggle()">Toggle</button>
                </div>
            </section>

            <!-- Button Input -->
            <section class="card input-card">
                <h2>Button Input</h2>
                <div class="button-display">
                    <div id="buttonIndicator" class="button-released"></div>
                    <p id="buttonStatus">Button: RELEASED</p>
                </div>
                <p class="info-text">Check button state in real-time</p>
            </section>

            <!-- Sensor Data -->
            <section class="card sensor-card">
                <h2>Temperature and Humidity</h2>
                <div class="sensor-display">
                    <p><strong>Temperature:</strong> <span id="temperature">-</span> °C</p>
                    <p><strong>Humidity:</strong> <span id="humidity">-</span> %</p>
                </div>
                <p class="info-text">Real-time sensor data from Arduino</p>
            </section>

            <!-- Relay Control -->
            <section class="card control-card">
                <h2>Arduino 3 (NodeMCU) Relay Control</h2>
                <div class="relay-display">
                    <p><strong>Relay Channel 1:</strong> <span id="relay1Status">OFF</span></p>
                    <p><strong>Relay Channel 2:</strong> <span id="relay2Status">OFF</span></p>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="toggleRelay(1, true)">Turn ON Relay 1</button>
                    <button class="btn btn-danger" onclick="toggleRelay(1, false)">Turn OFF Relay 1</button>
                    <button class="btn btn-primary" onclick="toggleRelay(2, true)">Turn ON Relay 2</button>
                    <button class="btn btn-danger" onclick="toggleRelay(2, false)">Turn OFF Relay 2</button>
                </div>
            </section>

            <!-- Settings -->
            <section class="card settings-card">
                <h2>Settings</h2>
                <div class="setting-group">
                    <label for="arduinoIpInput">Arduino IP Address:</label>
                    <div class="input-group">
                        <input 
                            type="text" 
                            id="arduinoIpInput" 
                            placeholder="192.168.1.100"
                            class="input-field"
                        >
                        <button class="btn btn-small" onclick="updateArduinoIp()">Update</button>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>RPI5 Web Interface · Arduino D1 WiFi Module</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
